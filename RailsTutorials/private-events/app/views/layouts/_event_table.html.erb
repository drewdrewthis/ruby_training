<table class='table'>
  <thead>
    <tr>
      <th>id</th>
      <th>Title</th>
      <th>Host</th>
      <th>Description</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <% local_assigns[:events].each do |event| %>
      <tr>
        <td><%= event.id %></td>
        <td><%= link_to event.title, event %></td>
        <td><%= event.creator.username %></td>
        <td><%= event.description %></td>
        <td><%= event.date %></td>
        <% if event.creator == current_user %>
          <td>
            <%= button_to 'Delete',
              event,
              :method => :delete,
              class: 'btn btn-danger'
            %>
        </td>
      <% end %>
      <% unless current_user.attended_events.exists?(event.id) %>
        <td>
          <%= button_to 'Attend Event',
            "/subscribe/#{event.id}/#{current_user.id}",
            :method => :post,
            class: 'btn btn-info'
          %>
      </td>
    <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
